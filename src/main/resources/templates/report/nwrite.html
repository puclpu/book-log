<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity">
<head>
<meta charset="UTF-8" name="viewport"
	content="width=device-width, initial-scale=1">
<title>ëŸê°</title>
<link rel="stylesheet" th:href="@{/css/book.css}">
<th:block th:replace="~{layouts/head::head}"></th:block>
</head>
<body>
	<th:block th:replace="layouts/body::header"></th:block>
	<div class="container">
		<form th:action="@{/report/write}" id="report_form" method="post" onsubmit="return check()">
			<div class="formWapper">
				<div id="write-info"> <!-- left page : book-info -->
					<!-- thumbnail -->
					<button type="button" id="thumbnail_btn"><img id="thumbnail_img" src="https://dohgam.s3.ap-northeast-2.amazonaws.com/thumbnail.png" class="thumbnail_img"></button>
					<input id="thumbnail_input" name="thumbnail" type="file" style="display: none;">
					
					<div id="book-detail" class="paddingtop_50" style="font-size: large;">
						<table>
							<tbody>
								<tr>
									<td>ì œëª©</td>
									<td><input name="title" type="text"></td>
								</tr>
								<tr>
									<td>ì‘ê°€</td>
									<td><input name="author" type="text"></td>
								</tr>
								<tr>
									<td>ì¶œíŒì‚¬</td>
									<td><input name="publisher" type="text"></td>
								</tr>
								<tr>
									<td>ISBN</td>
									<td><input name="isbn" type="text"></td>
								</tr>
								<tr>
									<td class="paddingtop_50">ë¶„ì•¼</td>
									<td class="paddingtop_50"><input name="genre" type="text"></td>
								</tr>
								<tr>
									<td>ìª½ìˆ˜</td>
									<td><input type="number" name="page"></td>
								</tr>
								<tr>
									<td>ì‹œì‘ì¼</td>
									<td><input type="date" name="startdate"></td>
								</tr>
								<tr>
									<td>ì¢…ë£Œì¼</td>
									<td><input type="date" name="enddate"></td>
								</tr>
								<tr>
									<td>í‰ì </td>
									<td id="rating">
										<!-- â˜…â˜…â˜…â˜…â˜…
										<span id="rating_star2">â˜…â˜…â˜…â˜…â˜…</span>
										<input id="rating_input" type="range" value="1" step="1" min="0" max="10"> -->
										<div style="position: absolute; right: 0; bottom: 0; width: 104px; height: 100%;">
											<span style=" width: 104px; color: #e6e6e6;">â˜…â˜…â˜…â˜…â˜…</span>
											<span id="rating_star2">â˜…â˜…â˜…â˜…â˜…</span>
											<input name="grade" id="rating_input" type="range" value="1" step="1" min="0" max="10">
										</div>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
				<div id="rightpage" class="page-padding_50"> <!-- right page : custom report -->
					<div id="toolbar">
						<button type="button" id="quote_btn" class="tool_btn">" "</button>
						<button type="button" id="pic_btn" class="tool_btn">ğŸ“·</button>
						<button type="button" id="qna_btn" class="tool_btn">? !</button>
						<!-- <button id="tree_btn" class="tool_btn">ğŸ‘¶ğŸ»</button> -->
						<!-- <input type="file" id="pic_input" name="uploadFile" multiple style="display: none;"> -->
						<div id="qna_list" style="display: none; padding: 10px;">
							<ul>
								<li><button type="button" class="a_btn ques_btn">ì´ ì±…ì„ ì„ íƒí•œ ì´ìœ </button></li>
								<li><button type="button" class="a_btn ques_btn">ì±…ì˜ ì£¼ì œ</button></li>
								<li><button type="button" class="a_btn ques_btn">ì±…ì˜ ì¤„ê±°ë¦¬</button></li>
								<li><button type="button" class="a_btn ques_btn">ê³µê°ê°€ëŠ” ì¸ë¬¼</button></li>
								<li><button type="button" class="a_btn ques_btn">ì‘ê°€ê°€ í•˜ê³ ì í•˜ëŠ” ë§ê³¼ ë‚˜ì˜ ìƒê°</button></li>
								<li><button type="button" class="a_btn ques_btn">í•¨ê»˜ ë– ì˜¤ë¥¸ ì‘í’ˆ</button></li>
								<li><button type="button" class="a_btn ques_btn">ì¸ìƒ ê¹Šì€ ë¶€ë¶„</button></li>
								<li><button type="button" class="a_btn ques_btn">ì´ ì±…ì„ ì„ ë¬¼í•˜ê³  ì‹¶ì€ ì‚¬ëŒ</button></li>
								<li><button type="button" class="a_btn ques_btn">ê³µê°í•˜ëŠ” ìƒí™©</button></li>
								<li><button type="button" class="a_btn ques_btn">ì—°ê´€ë˜ëŠ” ì‚¬íšŒ ì´ìŠˆ</button></li>
							</ul>
						</div>
						<!-- <div id="makeTree_div" style="display: none; padding: 10px;">
							<ul id="makeTree_list">
								<li>
									<div class="char_div">
										<div class="char_info">
											<input type="text" name="character1" placeholder="ì¸ë¬¼ëª…" style="font-size: large;">
											<input type="text" name="group" placeholder="ì¡°ì§|íšŒì‚¬" style="font-size: small;">
										</div> char_into div
										<div class="char_relation">
											<ul>
												<li>
													<input type="text" name="relationship" placeholder="ê´€ê³„">
													<input type="text" name="character2" placeholder="ì¸ë¬¼ëª…">
												</li>
											</ul>
											<button> + </button>
										</div> char_relation div
									</div>
								</li>
							</ul>
							<button> + </button>
						</div> -->
						<hr>
					</div> <!-- toolbar -->
					<div id="editor"></div>
					<div class="paddingtop_50"><button onclick="submitForm()" id="report_save_btn">ì €ì¥í•˜ê¸°</button></div>
				</div> <!-- right page -->
			</div> <!-- formWapper -->
		</form>
		<input type="file" id="pic_input" name="uploadFile" multiple style="display: none;">
	</div>
	<script type="text/javascript">
		const thumbnail_btn = document.getElementById('thumbnail_btn');
		const thumbnail_input = document.getElementById('thumbnail_input');
		const thumbnail_img = document.getElementById('thumbnail_img');
	
		thumbnail_btn.addEventListener('click', function() {
			thumbnail_input.click();
		});
	
		thumbnail_input.addEventListener('change', function() {

			var formData = new FormData();
			var files = thumbnail_input.files;
			
	
			formData.append("uploadFile", files[0]);
	
			$.ajax({
				url: '/report/imgupload',
				processData: false,
				contentType: false,
				data: formData,
				type: 'POST',
				dataType: 'json',
				success: function(imgArr) {
					console.log(imgArr);
	
					if (!imgArr || imgArr.length == 0) {
						alert('ì‚¬ì§„ ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
					} else {
						if (thumbnail_img.src != 'https://dohgam.s3.ap-northeast-2.amazonaws.com/thumbnail.png') {
							imgDelete(thumbnail_img.src);
						}
						thumbnail_img.src = imgArr[0];
					}
				}
			}); // ajax
		});
	</script>
	<script type="text/javascript" th:src="@{/js/book.js}"></script>
	<th:block th:replace="layouts/body::footer"></th:block>
</body>
</html>